<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="INCLUDE_xTaskDelayUntil must be defined as 1 for this function to be available. See the configuration section for more information."><title>xTaskDelayUntil in esp_idf_hal::sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../esp_idf_hal/index.html">esp_<wbr>idf_<wbr>hal</a><span class="version">0.45.2</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In esp_<wbr>idf_<wbr>hal::<wbr>sys</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">esp_idf_hal</a>::<wbr><a href="index.html">sys</a></span><h1>Function <span class="fn">xTaskDelayUntil</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#13370-13373">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn xTaskDelayUntil(
    pxPreviousWakeTime: *mut u32,
    xTimeIncrement: u32,
) -&gt; i32</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>INCLUDE_xTaskDelayUntil must be defined as 1 for this function to be available.
See the configuration section for more information.</p>
<p>Delay a task until a specified time.  This function can be used by periodic
tasks to ensure a constant execution frequency.</p>
<p>This function differs from vTaskDelay () in one important aspect:  vTaskDelay () will
cause a task to block for the specified number of ticks from the time vTaskDelay () is
called.  It is therefore difficult to use vTaskDelay () by itself to generate a fixed
execution frequency as the time between a task starting to execute and that task
calling vTaskDelay () may not be fixed [the task may take a different path though the
code between calls, or may get interrupted or preempted a different number of times
each time it executes].</p>
<p>Whereas vTaskDelay () specifies a wake time relative to the time at which the function
is called, xTaskDelayUntil () specifies the absolute (exact) time at which it wishes to
unblock.</p>
<p>The macro pdMS_TO_TICKS() can be used to calculate the number of ticks from a
time specified in milliseconds with a resolution of one tick period.</p>
<p>@param pxPreviousWakeTime Pointer to a variable that holds the time at which the
task was last unblocked.  The variable must be initialised with the current time
prior to its first use (see the example below).  Following this the variable is
automatically updated within xTaskDelayUntil ().</p>
<p>@param xTimeIncrement The cycle time period.  The task will be unblocked at
time *pxPreviousWakeTime + xTimeIncrement.  Calling xTaskDelayUntil with the
same xTimeIncrement parameter value will cause the task to execute with
a fixed interface period.</p>
<p>@return Value which can be used to check whether the task was actually delayed.
Will be pdTRUE if the task way delayed and pdFALSE otherwise.  A task will not
be delayed if the next expected wake time is in the past.</p>
<p>Example usage:
@code{c}
// Perform an action every 10 ticks.
void vTaskFunction( void * pvParameters )
{
TickType_t xLastWakeTime;
const TickType_t xFrequency = 10;
BaseType_t xWasDelayed;</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Initialise the xLastWakeTime variable with the current time.
</span>xLastWakeTime = xTaskGetTickCount ();
<span class="kw">for</span>( ;; )
{
    <span class="comment">// Wait for the next cycle.
    </span>xWasDelayed = xTaskDelayUntil( <span class="kw-2">&amp;</span>xLastWakeTime, xFrequency );

    <span class="comment">// Perform action here. xWasDelayed value can be used to determine
    // whether a deadline was missed if the code here took too long.
</span>}</code></pre></div>
<p>}
@endcode
\ingroup TaskCtrl</p>
</div></details></section></div></main></body></html>