<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Derive a key from an ongoing key derivation operation with custom production parameters."><title>psa_key_derivation_output_key_ext in esp_idf_hal::sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../esp_idf_hal/index.html">esp_<wbr>idf_<wbr>hal</a><span class="version">0.45.2</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In esp_<wbr>idf_<wbr>hal::<wbr>sys</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">esp_idf_hal</a>::<wbr><a href="index.html">sys</a></span><h1>Function <span class="fn">psa_key_derivation_output_key_ext</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#37714-37720">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn psa_key_derivation_output_key_ext(
    attributes: *const <a class="struct" href="struct.psa_key_attributes_s.html" title="struct esp_idf_hal::sys::psa_key_attributes_s">psa_key_attributes_s</a>,
    operation: *mut <a class="struct" href="struct.psa_key_derivation_s.html" title="struct esp_idf_hal::sys::psa_key_derivation_s">psa_key_derivation_s</a>,
    params: *const <a class="struct" href="struct.psa_key_production_parameters_s.html" title="struct esp_idf_hal::sys::psa_key_production_parameters_s">psa_key_production_parameters_s</a>,
    params_data_length: usize,
    key: *mut u32,
) -&gt; i32</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Derive a key from an ongoing key derivation operation with custom
production parameters.</p>
<p>\note
This is a deprecated variant of psa_key_derivation_output_key_custom().
It is equivalent except that the associated variable-length data
is passed in <code>params-&gt;data</code> instead of a separate parameter.
This function will be removed in a future version of Mbed TLS.</p>
<p>\param[in] attributes    The attributes for the new key.
If the key type to be created is
#PSA_KEY_TYPE_PASSWORD_HASH then the algorithm in
the policy must be the same as in the current
operation.
\param[in,out] operation The key derivation operation object to read from.
\param[in] params        Customization parameters for the key derivation.
When this is #PSA_KEY_PRODUCTION_PARAMETERS_INIT
with \p params_data_length = 0,
this function is equivalent to
psa_key_derivation_output_key().
Mbed TLS currently only supports the default
production parameters, i.e.
#PSA_KEY_PRODUCTION_PARAMETERS_INIT,
for all key types.
\param params_data_length
Length of <code>params-&gt;data</code> in bytes.
\param[out] key          On success, an identifier for the newly created
key. For persistent keys, this is the key
identifier defined in \p attributes.
\c 0 on failure.</p>
<p>\retval #PSA_SUCCESS
Success.
If the key is persistent, the key material and the key’s metadata
have been saved to persistent storage.
\retval #PSA_ERROR_ALREADY_EXISTS
This is an attempt to create a persistent key, and there is
already a persistent key with the given identifier.
\retval #PSA_ERROR_INSUFFICIENT_DATA
There was not enough data to create the desired key.
Note that in this case, no output is written to the output buffer.
The operation’s capacity is set to 0, thus subsequent calls to
this function will not succeed, even with a smaller output buffer.
\retval #PSA_ERROR_NOT_SUPPORTED
The key type or key size is not supported, either by the
implementation in general or in this particular location.
\retval #PSA_ERROR_INVALID_ARGUMENT
The provided key attributes are not valid for the operation.
\retval #PSA_ERROR_NOT_PERMITTED
The #PSA_KEY_DERIVATION_INPUT_SECRET or
#PSA_KEY_DERIVATION_INPUT_PASSWORD input was not provided through a
key; or one of the inputs was a key whose policy didn’t allow
#PSA_KEY_USAGE_DERIVE.
\retval #PSA_ERROR_INSUFFICIENT_MEMORY \emptydescription
\retval #PSA_ERROR_INSUFFICIENT_STORAGE \emptydescription
\retval #PSA_ERROR_COMMUNICATION_FAILURE \emptydescription
\retval #PSA_ERROR_HARDWARE_FAILURE \emptydescription
\retval #PSA_ERROR_CORRUPTION_DETECTED \emptydescription
\retval #PSA_ERROR_DATA_INVALID \emptydescription
\retval #PSA_ERROR_DATA_CORRUPT \emptydescription
\retval #PSA_ERROR_STORAGE_FAILURE \emptydescription
\retval #PSA_ERROR_BAD_STATE
The operation state is not valid (it must be active and completed
all required input steps), or the library has not been previously
initialized by psa_crypto_init().
It is implementation-dependent whether a failure to initialize
results in this error code.</p>
</div></details></section></div></main></body></html>