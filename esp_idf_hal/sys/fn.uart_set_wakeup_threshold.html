<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="@brief Set the number of RX pin signal edges for light sleep wakeup"><title>uart_set_wakeup_threshold in esp_idf_hal::sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../esp_idf_hal/index.html">esp_<wbr>idf_<wbr>hal</a><span class="version">0.45.2</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In esp_<wbr>idf_<wbr>hal::<wbr>sys</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">esp_idf_hal</a>::<wbr><a href="index.html">sys</a></span><h1>Function <span class="fn">uart_set_wakeup_threshold</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#82671-82674">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn uart_set_wakeup_threshold(
    uart_num: u32,
    wakeup_threshold: i32,
) -&gt; i32</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>@brief Set the number of RX pin signal edges for light sleep wakeup</p>
<p>UART can be used to wake up the system from light sleep. This feature works
by counting the number of positive edges on RX pin and comparing the count to
the threshold. When the count exceeds the threshold, system is woken up from
light sleep. This function allows setting the threshold value.</p>
<p>Stop bit and parity bits (if enabled) also contribute to the number of edges.
For example, letter ‘a’ with ASCII code 97 is encoded as 0100001101 on the wire
(with 8n1 configuration), start and stop bits included. This sequence has 3
positive edges (transitions from 0 to 1). Therefore, to wake up the system
when ‘a’ is sent, set wakeup_threshold=3.</p>
<p>The character that triggers wakeup is not received by UART (i.e. it can not
be obtained from UART FIFO). Depending on the baud rate, a few characters
after that will also not be received. Note that when the chip enters and exits
light sleep mode, APB frequency will be changing. To ensure that UART has
correct Baud rate all the time, it is necessary to select a source clock which has
a fixed frequency and remains active during sleep. For the supported clock sources
of the chips, please refer to <code>uart_sclk_t</code> or <code>soc_periph_uart_clk_src_legacy_t</code></p>
<p>@note in ESP32, the wakeup signal can only be input via IO_MUX (i.e.
GPIO3 should be configured as function_1 to wake up UART0,
GPIO9 should be configured as function_5 to wake up UART1), UART2
does not support light sleep wakeup feature.</p>
<p>@param uart_num  UART number, the max port number is (UART_NUM_MAX -1).
@param wakeup_threshold  number of RX edges for light sleep wakeup, value is 3 .. 0x3ff.
@return
- ESP_OK on success
- ESP_ERR_INVALID_ARG if uart_num is incorrect or wakeup_threshold is
outside of [3, 0x3ff] range.</p>
</div></details></section></div></main></body></html>