<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief          Load a session for session resumption."><title>mbedtls_ssl_set_session in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_<wbr>idf_<wbr>sys</a><span class="version">0.36.1</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">esp_idf_sys</a></span><h1>Function <span class="fn">mbedtls_ssl_set_session</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#43911-43914">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn mbedtls_ssl_set_session(
    ssl: *mut <a class="struct" href="struct.mbedtls_ssl_context.html" title="struct esp_idf_sys::mbedtls_ssl_context">mbedtls_ssl_context</a>,
    session: *const <a class="struct" href="struct.mbedtls_ssl_session.html" title="struct esp_idf_sys::mbedtls_ssl_session">mbedtls_ssl_session</a>,
) -&gt; c_int</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief          Load a session for session resumption.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>            Sessions loaded through this call will be considered
            <span class="kw">for </span>session resumption <span class="kw">in </span>the next handshake.</code></pre></div>
<p>\note           Even if this call succeeds, it is not guaranteed that
the next handshake will indeed be shortened through the
use of session resumption: The server is always free
to reject any attempt for resumption and fall back to
a full handshake.</p>
<p>\note           This function can handle a variety of mechanisms for session
resumption: For TLS 1.2, both session ID-based resumption
and ticket-based resumption will be considered. For TLS 1.3,
sessions equate to tickets, and loading one session by
calling this function will lead to its corresponding ticket
being advertised as resumption PSK by the client. This
depends on session tickets being enabled (see
#MBEDTLS_SSL_SESSION_TICKETS configuration option) though.
If session tickets are disabled, a call to this function
with a TLS 1.3 session, will not have any effect on the next
handshake for the SSL context \p ssl.</p>
<p>\param ssl      The SSL context representing the connection which should
be attempted to be setup using session resumption. This
must be initialized via mbedtls_ssl_init() and bound to
an SSL configuration via mbedtls_ssl_setup(), but
the handshake must not yet have been started.
\param session  The session to be considered for session resumption.
This must be a session previously exported via
mbedtls_ssl_get_session(), and potentially serialized and
deserialized through mbedtls_ssl_session_save() and
mbedtls_ssl_session_load() in the meantime.</p>
<p>\return         \c 0 if successful.
\return         \c MBEDTLS_ERR_SSL_FEATURE_UNAVAILABLE if the session
could not be loaded because one session has already been
loaded. This error is non-fatal, and has no observable
effect on the SSL context or the session that was attempted
to be loaded.
\return         Another negative error code on other kinds of failure.</p>
<p>\sa             mbedtls_ssl_get_session()
\sa             mbedtls_ssl_session_load()</p>
</div></details></section></div></main></body></html>