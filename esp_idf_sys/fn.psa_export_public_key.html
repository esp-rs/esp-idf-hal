<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief Export a public key or the public part of a key pair in binary format."><title>psa_export_public_key in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_<wbr>idf_<wbr>sys</a><span class="version">0.36.1</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">esp_idf_sys</a></span><h1>Function <span class="fn">psa_export_public_key</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#37206-37211">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn psa_export_public_key(
    key: <a class="type" href="type.mbedtls_svc_key_id_t.html" title="type esp_idf_sys::mbedtls_svc_key_id_t">mbedtls_svc_key_id_t</a>,
    data: *mut u8,
    data_size: usize,
    data_length: *mut usize,
) -&gt; <a class="type" href="type.psa_status_t.html" title="type esp_idf_sys::psa_status_t">psa_status_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief Export a public key or the public part of a key pair in binary format.</p>
<p>The output of this function can be passed to psa_import_key() to
create an object that is equivalent to the public key.</p>
<p>This specification supports a single format for each key type.
Implementations may support other formats as long as the standard
format is supported. Implementations that support other formats
should ensure that the formats are clearly unambiguous so as to
minimize the risk that an invalid input is accidentally interpreted
according to a different format.</p>
<p>For standard key types, the output format is as follows:</p>
<ul>
<li>For RSA public keys (#PSA_KEY_TYPE_RSA_PUBLIC_KEY), the DER encoding of
the representation defined by RFC 3279 §2.3.1 as <code>RSAPublicKey</code>.
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>RSAPublicKey ::= SEQUENCE {
   modulus            INTEGER,    -- n
   publicExponent     INTEGER  }  -- e</code></pre></div>
</li>
<li>For elliptic curve keys on a twisted Edwards curve (key types for which
#PSA_KEY_TYPE_IS_ECC_PUBLIC_KEY is true and #PSA_KEY_TYPE_ECC_GET_FAMILY
returns #PSA_ECC_FAMILY_TWISTED_EDWARDS), the public key is as defined
by RFC 8032
(a 32-byte string for Edwards25519, a 57-byte string for Edwards448).</li>
<li>For other elliptic curve public keys (key types for which
#PSA_KEY_TYPE_IS_ECC_PUBLIC_KEY is true), the format is the uncompressed
representation defined by SEC1 §2.3.3 as the content of an ECPoint.
Let <code>m</code> be the bit size associated with the curve, i.e. the bit size of
<code>q</code> for a curve over <code>F_q</code>. The representation consists of:
<ul>
<li>The byte 0x04;</li>
<li><code>x_P</code> as a <code>ceiling(m/8)</code>-byte string, big-endian;</li>
<li><code>y_P</code> as a <code>ceiling(m/8)</code>-byte string, big-endian.</li>
</ul>
</li>
<li>For Diffie-Hellman key exchange public keys (key types for which
#PSA_KEY_TYPE_IS_DH_PUBLIC_KEY is true),
the format is the representation of the public key <code>y = g^x mod p</code> as a
big-endian byte string. The length of the byte string is the length of the
base prime <code>p</code> in bytes.</li>
</ul>
<p>Exporting a public key object or the public part of a key pair is
always permitted, regardless of the key’s usage flags.</p>
<p>\param key               Identifier of the key to export.
\param[out] data         Buffer where the key data is to be written.
\param data_size         Size of the \p data buffer in bytes.
\param[out] data_length  On success, the number of bytes
that make up the key data.</p>
<p>\retval #PSA_SUCCESS \emptydescription
\retval #PSA_ERROR_INVALID_HANDLE \emptydescription
\retval #PSA_ERROR_INVALID_ARGUMENT
The key is neither a public key nor a key pair.
\retval #PSA_ERROR_NOT_SUPPORTED \emptydescription
\retval #PSA_ERROR_BUFFER_TOO_SMALL
The size of the \p data buffer is too small. You can determine a
sufficient buffer size by calling
#PSA_EXPORT_KEY_OUTPUT_SIZE(#PSA_KEY_TYPE_PUBLIC_KEY_OF_KEY_PAIR(\c type), \c bits)
where \c type is the key type
and \c bits is the key size in bits.
\retval #PSA_ERROR_COMMUNICATION_FAILURE \emptydescription
\retval #PSA_ERROR_HARDWARE_FAILURE \emptydescription
\retval #PSA_ERROR_CORRUPTION_DETECTED \emptydescription
\retval #PSA_ERROR_STORAGE_FAILURE \emptydescription
\retval #PSA_ERROR_INSUFFICIENT_MEMORY \emptydescription
\retval #PSA_ERROR_BAD_STATE
The library has not been previously initialized by psa_crypto_init().
It is implementation-dependent whether a failure to initialize
results in this error code.</p>
</div></details></section></div></main></body></html>