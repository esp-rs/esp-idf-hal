<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Open a handle to an existing persistent key."><title>psa_open_key in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_<wbr>idf_<wbr>sys</a><span class="version">0.36.1</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">esp_idf_sys</a></span><h1>Function <span class="fn">psa_open_key</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#41318">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn psa_open_key(
    key: <a class="type" href="type.mbedtls_svc_key_id_t.html" title="type esp_idf_sys::mbedtls_svc_key_id_t">mbedtls_svc_key_id_t</a>,
    handle: *mut <a class="type" href="type.psa_key_handle_t.html" title="type esp_idf_sys::psa_key_handle_t">psa_key_handle_t</a>,
) -&gt; <a class="type" href="type.psa_status_t.html" title="type esp_idf_sys::psa_status_t">psa_status_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Open a handle to an existing persistent key.</p>
<p>Open a handle to a persistent key. A key is persistent if it was created
with a lifetime other than #PSA_KEY_LIFETIME_VOLATILE. A persistent key
always has a nonzero key identifier, set with psa_set_key_id() when
creating the key. Implementations may provide additional pre-provisioned
keys that can be opened with psa_open_key(). Such keys have an application
key identifier in the vendor range, as documented in the description of
#psa_key_id_t.</p>
<p>The application must eventually close the handle with psa_close_key() or
psa_destroy_key() to release associated resources. If the application dies
without calling one of these functions, the implementation should perform
the equivalent of a call to psa_close_key().</p>
<p>Some implementations permit an application to open the same key multiple
times. If this is successful, each call to psa_open_key() will return a
different key handle.</p>
<p>\note This API is not part of the PSA Cryptography API Release 1.0.0
specification. It was defined in the 1.0 Beta 3 version of the
specification but was removed in the 1.0.0 released version. This API is
kept for the time being to not break applications relying on it. It is not
deprecated yet but will be in the near future.</p>
<p>\note Applications that rely on opening a key multiple times will not be
portable to implementations that only permit a single key handle to be
opened. See also :ref:`key-handles`.</p>
<p>\param key           The persistent identifier of the key.
\param[out] handle   On success, a handle to the key.</p>
<p>\retval #PSA_SUCCESS
Success. The application can now use the value of <code>*handle</code>
to access the key.
\retval #PSA_ERROR_INSUFFICIENT_MEMORY
The implementation does not have sufficient resources to open the
key. This can be due to reaching an implementation limit on the
number of open keys, the number of open key handles, or available
memory.
\retval #PSA_ERROR_DOES_NOT_EXIST
There is no persistent key with key identifier \p key.
\retval #PSA_ERROR_INVALID_ARGUMENT
\p key is not a valid persistent key identifier.
\retval #PSA_ERROR_NOT_PERMITTED
The specified key exists, but the application does not have the
permission to access it. Note that this specification does not
define any way to create such a key, but it may be possible
through implementation-specific means.
\retval #PSA_ERROR_COMMUNICATION_FAILURE \emptydescription
\retval #PSA_ERROR_CORRUPTION_DETECTED \emptydescription
\retval #PSA_ERROR_STORAGE_FAILURE \emptydescription
\retval #PSA_ERROR_DATA_INVALID \emptydescription
\retval #PSA_ERROR_DATA_CORRUPT \emptydescription
\retval #PSA_ERROR_BAD_STATE
The library has not been previously initialized by psa_crypto_init().
It is implementation-dependent whether a failure to initialize
results in this error code.</p>
</div></details></section></div></main></body></html>