<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief Destroy a key."><title>psa_destroy_key in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_<wbr>idf_<wbr>sys</a><span class="version">0.36.1</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">esp_idf_sys</a></span><h1>Function <span class="fn">psa_destroy_key</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#37184">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn psa_destroy_key(
    key: <a class="type" href="type.mbedtls_svc_key_id_t.html" title="type esp_idf_sys::mbedtls_svc_key_id_t">mbedtls_svc_key_id_t</a>,
) -&gt; <a class="type" href="type.psa_status_t.html" title="type esp_idf_sys::psa_status_t">psa_status_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief Destroy a key.</p>
<p>This function destroys a key from both volatile
memory and, if applicable, non-volatile storage. Implementations shall
make a best effort to ensure that the key material cannot be recovered.</p>
<p>This function also erases any metadata such as policies and frees
resources associated with the key.</p>
<p>If a key is currently in use in a multipart operation, then destroying the
key will cause the multipart operation to fail.</p>
<p>\warning    We can only guarantee that the the key material will
eventually be wiped from memory. With threading enabled
and during concurrent execution, copies of the key material may
still exist until all threads have finished using the key.</p>
<p>\param key  Identifier of the key to erase. If this is \c 0, do nothing and
return #PSA_SUCCESS.</p>
<p>\retval #PSA_SUCCESS
\p key was a valid identifier and the key material that it
referred to has been erased. Alternatively, \p key is \c 0.
\retval #PSA_ERROR_NOT_PERMITTED
The key cannot be erased because it is
read-only, either due to a policy or due to physical restrictions.
\retval #PSA_ERROR_INVALID_HANDLE
\p key is not a valid identifier nor \c 0.
\retval #PSA_ERROR_COMMUNICATION_FAILURE
There was a failure in communication with the cryptoprocessor.
The key material may still be present in the cryptoprocessor.
\retval #PSA_ERROR_DATA_INVALID
This error is typically a result of either storage corruption on a
cleartext storage backend, or an attempt to read data that was
written by an incompatible version of the library.
\retval #PSA_ERROR_STORAGE_FAILURE
The storage is corrupted. Implementations shall make a best effort
to erase key material even in this stage, however applications
should be aware that it may be impossible to guarantee that the
key material is not recoverable in such cases.
\retval #PSA_ERROR_CORRUPTION_DETECTED
An unexpected condition which is not a storage corruption or
a communication failure occurred. The cryptoprocessor may have
been compromised.
\retval #PSA_ERROR_BAD_STATE
The library has not been previously initialized by psa_crypto_init().
It is implementation-dependent whether a failure to initialize
results in this error code.</p>
</div></details></section></div></main></body></html>