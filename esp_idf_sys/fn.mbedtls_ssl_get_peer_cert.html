<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief          Return the peer certificate from the current connection."><title>mbedtls_ssl_get_peer_cert in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_<wbr>idf_<wbr>sys</a><span class="version">0.36.1</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">esp_idf_sys</a></span><h1>Function <span class="fn">mbedtls_ssl_get_peer_cert</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#44153">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn mbedtls_ssl_get_peer_cert(
    ssl: *const <a class="struct" href="struct.mbedtls_ssl_context.html" title="struct esp_idf_sys::mbedtls_ssl_context">mbedtls_ssl_context</a>,
) -&gt; *const <a class="struct" href="struct.mbedtls_x509_crt.html" title="struct esp_idf_sys::mbedtls_x509_crt">mbedtls_x509_crt</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief          Return the peer certificate from the current connection.</p>
<p>\param  ssl     The SSL context to use. This must be initialized and setup.</p>
<p>\return         The current peer certificate, if available.
The returned certificate is owned by the SSL context and
is valid only until the next call to the SSL API.
\return         \c NULL if no peer certificate is available. This might
be because the chosen ciphersuite doesn’t use CRTs
(PSK-based ciphersuites, for example), or because
#MBEDTLS_SSL_KEEP_PEER_CERTIFICATE has been disabled,
allowing the stack to free the peer’s CRT to save memory.</p>
<p>\note           For one-time inspection of the peer’s certificate during
the handshake, consider registering an X.509 CRT verification
callback through mbedtls_ssl_conf_verify() instead of calling
this function. Using mbedtls_ssl_conf_verify() also comes at
the benefit of allowing you to influence the verification
process, for example by masking expected and tolerated
verification failures.</p>
<p>\warning        You must not use the pointer returned by this function
after any further call to the SSL API, including
mbedtls_ssl_read() and mbedtls_ssl_write(); this is
because the pointer might change during renegotiation,
which happens transparently to the user.
If you want to use the certificate across API calls,
you must make a copy.</p>
</div></details></section></div></main></body></html>