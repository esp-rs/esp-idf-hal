<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="@brief  Set DNS Server information"><title>esp_netif_set_dns_info in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (8361aef0d 2025-01-14)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_<wbr>idf_<wbr>sys</a><span class="version">0.36.1</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">esp_idf_sys</a></span><h1>Function <span class="fn">esp_netif_set_dns_info</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-7bacc267eb742aef/out/bindings.rs.html#19639-19643">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn esp_netif_set_dns_info(
    esp_netif: *mut <a class="type" href="type.esp_netif_t.html" title="type esp_idf_sys::esp_netif_t">esp_netif_t</a>,
    type_: <a class="type" href="type.esp_netif_dns_type_t.html" title="type esp_idf_sys::esp_netif_dns_type_t">esp_netif_dns_type_t</a>,
    dns: *mut <a class="struct" href="struct.esp_netif_dns_info_t.html" title="struct esp_idf_sys::esp_netif_dns_info_t">esp_netif_dns_info_t</a>,
) -&gt; <a class="type" href="type.esp_err_t.html" title="type esp_idf_sys::esp_err_t">esp_err_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>@brief  Set DNS Server information</p>
<p>This function behaves differently if DHCP server or client is enabled</p>
<p>If DHCP client is enabled, main and backup DNS servers will be updated automatically
from the DHCP lease if the relevant DHCP options are set. Fallback DNS Server is never updated from the DHCP lease
and is designed to be set via this API.
If DHCP client is disabled, all DNS server types can be set via this API only.</p>
<p>Note that LWIP stores DNS server information globally, not per interface, so the first parameter is unused
in the default LWIP configuration.
If CONFIG_ESP_NETIF_SET_DNS_PER_DEFAULT_NETIF=1 this API sets internal DNS server information per
netif. Itâ€™s also possible to set the global DNS server info by supplying esp_netif=NULL</p>
<p>If DHCP server is enabled, the Main DNS Server setting is used by the DHCP server to provide a DNS Server option
to DHCP clients (Wi-Fi stations).</p>
<ul>
<li>The default Main DNS server is typically the IP of the DHCP server itself.</li>
<li>This function can override it by setting server type ESP_NETIF_DNS_MAIN.</li>
<li>Other DNS Server types are not supported for the DHCP server.</li>
<li>To propagate the DNS info to client, please stop the DHCP server before using this API.</li>
</ul>
<p>@param[in]  esp_netif Handle to esp-netif instance
@param[in]  type Type of DNS Server to set: ESP_NETIF_DNS_MAIN, ESP_NETIF_DNS_BACKUP, ESP_NETIF_DNS_FALLBACK
@param[in]  dns  DNS Server address to set</p>
<p>@return
- ESP_OK on success
- ESP_ERR_ESP_NETIF_INVALID_PARAMS invalid params</p>
</div></details></section></div></main></body></html>